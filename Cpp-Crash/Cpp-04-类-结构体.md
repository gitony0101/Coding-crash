# C++ 编程笔记 04

- 类
- 结构体
- 构造函数

- oop 面向对象编程
  - 特性：面向对象编程具有继承、多态、封装

## 类

- 类像一个容器，装载着变量和方法，所以定义一个类，就是在定义变量和方法。
- `.h` 文件用于函数和变量的声明，而 `.cpp` 文件则用于定义。

## 头文件`.h file` 普通类的`.h .cpp`分离写法

- ### 头文件`.h file` 只作类的声明，不作实现
- ### `.cpp` 用作实现

## 结构体

结构体属于用户**自定义的数据类型**，允许用户存储不同的数据类型

**一些内置的数据类型的集合**

像不像字典？

**语法：**`struct 结构体名 { 结构体成员列表 }；`

通过结构体创建变量的方式有三种：前两种使用较多

- struct 结构体名 变量名
- struct 结构体名 变量名 = { 成员 1 值 ， 成员 2 值...}
- 定义结构体时顺便创建变量 使用较少

注意：

- 定义结构体时，struct 不可省略，使用时可以直接调用结构体名
- 结构体做函数参数，const 可以冻结防止误操作
  - 值传递
  - 地址传递（引用减少内存使用）

# 构造函数 Consturctor 和析构函数 Destrctor

构造函数 Consturctor 和析构函数 Destrctor:

- 对象的初始化和清理,编译器自动调用，你不写，也会调用**空实现**

## 构造函数：初始化主要作用在于创建对象时为对象的成员属性赋值，构造函数由编译器自动调用，无须手动调用。

- 没有返回值，不用 void
  - 函数名称和类名一样
  - 可以有参数，能重载
  - 创建对象的时候，构造函数会且只会自动调用一次，类比手机初始化一次就好
  - 两种分类方式：
    - 按参数分类：有参构造和无参构造
    - 按照类型分类：普通和拷贝构造（需要 const &引用） 以后还要讲
  - 三种调用方式：
    - 括号法 `person p1(10);person p2(p1);`
    - 显示法 `person p3 = person（10);`
    - 隐式转换法 `person p5 = p4;`
  - 方法归类只是归类，掌握规律， 说明这里使用很灵活就是了
  - 注意`person(10)`是匿名对象，执行结束后系统会立回收

## 析构函数：清理，主要作用在于对象销毁前系统自动调用，执行一些清理工作。

- 函数名和类名相同，但是要在名称前加`波浪号~`
- 没有返回值不用 void
- 不可以有参数，不能重载（销毁用的，搞这些没意思）
- 对象在销毁前，会且只会自动调用析构函数一次，类比重置手机一次就好

小结：

- 为什么要同名？因为你要知道你的对象从哪里来，到哪里去，很清晰。
- 为什么没有返回值，一个初始化，一个销毁，没有必要上来就返回数值活着销毁了还要再来返回什么，啰嗦

# 面向对象编程 Object-Oriented Programming - OOP

py 和 cpp 都是

## 面向对象和面向过程

面向对象和面向过程，字面意思的区别，核心是对编程的认知：

要把大象装冰箱：

- 面向对象：人类，大象类，冰箱类，人类的实例，人类的方法，人类的属性，冰箱类的实例，冰箱类的方法，冰箱类的属性
- 面向过程：把冰箱门打开，把大象放进冰箱，冰箱门关上

## 面向对象编程 特性

面向对象编程具有**继承、多态、封装**等特性以及 class、interface、private、public 等特性

> 继承：复用前人的代码,多态：复用后人的代码

## 继承

1. 继承的写法
2. 集成的构造函数写法
3. 权限问题

### 继承方式权限 private >> protected >> public

子类：继承方式父类

继承方式：public 公有继承，private 私有继承 ，protect 保护继承

### 继承的构造函数写法

子类的构造函数必须要调用父类的构造函数

### 权限问题 用继承方式去看权限问题

- ### 父类当中的**属性**在子类当中的最低**呈现**

> 同时子类中继承方式会**升级**原来父类的 public 到 protected，父类中的私有属性子类不可访问

### 单继承中的构造顺序和析构顺序

普通对象来说，构造顺序和析构顺序相反的

### 多继承：存在两个或者两个以上的父类，称之为多继承

- 权限和单继承一样，构造函数写法和单继承也是一样的

## 虚函数：用 virtual 修饰的函数

### 为什么引入虚函数

1.因为当你顶级基类 A 有一虚函数 play()而 A 的子类 B 也有 play();，A 的子类 C 也有 play();，这就说明如果顶级基类 A 中的 play();若定义怎么玩是不合理的。因为 B 有 B 的玩法 C 有 C 的玩法。所以这种情况下定义为纯虚函数目的在于使子类仅仅只是继承函数的接口，告诉子类的设计者“你必须在子类中提供一个纯虚函数的实现，但我不知道你会怎么样实现它” 2.引入纯虚函数，则编译器要求在子类中必须予以重写以实现多态性

### 虚函数对内存的影响： 32 位系统只增加 4 个字节，64 位 8 个字节

- 虚指针的力量 应用在多态里面

### 纯虚函数 没有函数体的函数

- 构造函数没有虚函数，析构函数有虚函数
- 抽象类： 具有纯虚函数的类
- 抽象类的特性：不能创建对象，但是可以创建对象指针
- ADT Abstract Data Type 抽象数据类型

### 虚析构函数（析构函数可以（往往）是虚函数）

- 父类指针，被子类初始化，会出现内存泄漏问题

## 多态

多态按字面的意思就是多种形态。当类之间存在层次结构，并且类之间是通过继承关联时，就会用到多态。

C++ 多态意味着调用成员函数时，会根据调用函数的对象的类型来执行不同的函数。

不确定的定义、数值，让用户去处理

- 打印函数
- 回调函数

`多态 virtual 引用`

## 封装

封装，就是把客观事物封装成抽象的类，并且类可以把自己的数据和方法只让可信的类或者对象操作，对不可信的进行信息隐藏。一个类就是一个封装了数据以及操作这些数据的代码的逻辑实体。在一个对象内部，某些代码或某些数据可以是私有的，不能被外界访问。通过这种方式，对象对内部数据提供了不同级别的保护，以防止程序中无关的部分意外的改变或错误的使用了对象的私有部分。
